1. Informaci√≥n GeneralAvisServer es un backend reactivo de alto rendimiento desarrollado con Spring Boot (WebFlux) para la gesti√≥n de jugadores, inventarios y matchmaking en tiempo real. Est√° desplegado sobre un entorno Linux (Lubuntu) y utiliza Tailscale para garantizar conexiones seguras a trav√©s de una red privada virtual (VPN).Sistema Operativo: Lubuntu 22.04 / 24.04Usuario de despliegue: lubuntuRuta del proyecto: /home/lubuntu/ProyectoIntermodularDAM/serverArchivo ejecutable: server-0.0.1-SNAPSHOT.jar2. Arquitectura del SistemaEl servidor utiliza una pila tecnol√≥gica orientada a la reactividad y la escalabilidad:Core: Spring Boot con Spring WebFlux (Non-blocking).Base de Datos Principal: PostgreSQL alojada en Supabase, conectada mediante drivers reactivos R2DBC.Cach√© y Datos Ef√≠meros: Redis (Instancia local) gestionado a trav√©s de la abstracci√≥n Spring Cache para rendimiento extremo.Matchmaking y Colas: RabbitMQ (Instancia local) para emparejamiento de jugadores.Comunicaciones Bidireccionales: RSocket sobre TCP para las batallas y eventos en tiempo real.Seguridad: Autenticaci√≥n basada en JWT (JSON Web Tokens).3. Direcciones y Puertos (Red Tailscale)El servidor est√° expuesto en la red privada de Tailscale bajo la IP est√°tica asignada a la m√°quina virtual (100.112.94.34). Los clientes deben apuntar a las siguientes rutas:ServicioProtocoloDirecci√≥n / EndpointDescripci√≥nAPI REST (P√∫blica)HTTPhttp://100.112.94.34:8080/api/public/**Endpoints accesibles sin token.API REST (Auth)HTTPhttp://100.112.94.34:8080/api/auth/**Registro e inicio de sesi√≥n.API REST (Privada)HTTPhttp://100.112.94.34:8080/api/**Requiere cabecera Authorization: Bearer <JWT>.RSocket (Batallas)TCP100.112.94.34:7000Conexi√≥n persistente para tiempo real.4. Gesti√≥n del Servicio (Systemd)La aplicaci√≥n est√° demonizada como un servicio de Linux llamado avisserver.service. Esto garantiza que arranque autom√°ticamente con el sistema operativo y se reinicie en caso de fallo.Comandos de administraci√≥n:Bashsudo systemctl status avisserver   # Ver estado
sudo systemctl start avisserver    # Arrancar
sudo systemctl stop avisserver     # Detener
sudo systemctl restart avisserver  # Reiniciar
sudo journalctl -u avisserver -f   # Ver logs en tiempo real
5. üîÑ Gu√≠a de Actualizaci√≥n desde GitHubCuando se suba nuevo c√≥digo al repositorio, sigue estos pasos para actualizar el servidor en producci√≥n sin alterar la configuraci√≥n del sistema:Detener el servicio actual:Bashsudo systemctl stop avisserver
Descargar los √∫ltimos cambios:Bashcd /home/lubuntu/ProyectoIntermodularDAM
git pull origin main
(Nota: Si necesitas ir a un commit espec√≠fico, usa git fetch --all seguido de git checkout <hash_del_commit>).Recompilar el proyecto:Bashcd server
mvn clean package -DskipTests
Reiniciar el servicio:Bashsudo systemctl start avisserver
Verificar que arranca correctamente:Bashsudo journalctl -u avisserver -f
6. üõ†Ô∏è Soluci√≥n de Problemas Frecuentes (Troubleshooting)Error al arrancar: A component required a bean of type 'org.springframework.cache.CacheManager' that could not be found.Causa: Se est√°n utilizando anotaciones de cach√© (como @EnableCaching o @Cacheable) en el c√≥digo, pero falta la dependencia principal de cach√© en el proyecto.Soluci√≥n: A√±adir la siguiente dependencia en el archivo pom.xml y recompilar:XML<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-cache</artifactId>
</dependency>
7. Integraciones de TercerosEl backend consume las siguientes APIs externas:OpenWeather API: Gesti√≥n de climas din√°micos.Unsplash API: Im√°genes asociadas.Nuthatch API: Datos ornitol√≥gicos.
